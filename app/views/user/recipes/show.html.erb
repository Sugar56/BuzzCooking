<div class="container">
  <div class="row">
    <div class="col-sm-3">
      <table class="table table-hover">
        <thead>
          <tr align="center">
            <th>ジャンル検索</th>
          </tr>
        </thead>
        <tbody>
          <% @genres.each do |genre| %>
          <tr>
            <td><%= genre.name %></td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <div class="col-sm-9">
      <div class="row">
        <div class="col">
          <h2><strong>レシピ詳細</strong></h2>

          <%= link_to "投稿編集", edit_recipe_path(@recipe.id), class: "btn btn-sm btn-success" %>
          <%= link_to "投稿削除", recipe_path(@recipe.id), method: :delete, data: { confilm: "本当に退会しますか？" }, class: "btn btn-sm btn-danger" %>

        </div>
      </div>

      <div class="row">
        <div class="col">
          <p><strong><%= @recipe.name %></strong></p>
        </div>
        <div class="col">
          <% if @recipe.favorited_by?(current_user) %>
            <%= link_to recipe_favorites_path(@recipe), method: :delete, class: "text-danger" do %>
              ♥<%= @recipe.favorites.count %>
            <% end %>
          <% else %>
            <%= link_to recipe_favorites_path(@recipe), method: :post do %>
              ♥<%= @recipe.favorites.count %>
          <% end %>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="row">
          <div class="col">
            <%= image_tag recipe.get_image, size: "200x200" %>
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="row">
          <div class="col">
            <p><strong>レシピ説明</strong></p>
            <%= @recipe.recipe_explanation %>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <%= link_to user_path(@recipe.user.id) do %>
              <%= @recipe.user.name %>
            <% end %>
          </div>
        </div>

        <div class="row">
          <div class="col">

            <table class="table">
              <thead>
                <tr>
                  <th><strong>材料</strong></th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><%= @recipe.ingredient.name %></td>
                  <td><%= @recipe.ingredient.amount %></td>
                </tr>
              </tbody>
            </table>

          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">

        </div>
      </div>

      <div class="row">
        <div class="col">
          <p><strong>ポイント</strong></p>
          <%= @recipe.point_explanation %>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <p><strong>コメント欄</strong>(全<%= @recipe.post_comments.count %>件)</p>
          <% @recipe.recipe_comments.each do |recipe_comment| %>
            <%= image_tag post_comment.user.get_profile_image(50,50) %>
            <%= recipe_comment.user.name %>
            <%= recipe_comment.created_at.strftime('%Y/%m/%d') %><%= recipe_comment.comment %>
            <% if recipe_comment.user == current_user %>
              <%= link_to "削除", recipe_recipe_comment_path(recipe_comment.recipe, recipe_comment), method: :delete %>
            <% end %>
          <% end %>
          <%= form_with model: [@recipe, @recipe_comment] do |f| %>
            <%= f.text_area :comment, rows: '5', placeholder: "コメントをここに" %>
            <%= f.submit "送信" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
